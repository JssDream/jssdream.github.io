<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>少言少语 - 静以修身，俭以养德</title><meta name="author" content="JssDream"><meta name="copyright" content="JssDream"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="少言少语">
<meta property="og:type" content="website">
<meta property="og:title" content="少言少语">
<meta property="og:url" content="https://www.hjava.cn/page/2/index.html">
<meta property="og:site_name" content="少言少语">
<meta property="og:description" content="少言少语">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/24471999">
<meta property="article:author" content="JssDream">
<meta property="article:tag" content="个人博客,分享,Java,Golang,技术博客,JssDream,随记,博客,开源,开源博客,计算机">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://avatars.githubusercontent.com/u/24471999"><link rel="shortcut icon" href="/images/favicon0.png"><link rel="canonical" href="https://www.hjava.cn/page/2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":100,"position":"top","messagePrev":"本文自上次更新已经过了","messageNext":"天，文章的内容可能已过时，若内容或图片失效，请留言反馈。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '少言少语',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-04-29 16:40:55'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://avatars.githubusercontent.com/u/24471999" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">52</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">74</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">32</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://img.tfish.eu.org/"><i class="fa-fw fas fa-images"></i><span> 图床</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://img.tfish.eu.org/file/90a7b42b487084f6d8e56.png')"><nav id="nav"><span id="blog-info"><a href="/" title="少言少语"><span class="site-name">少言少语</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://img.tfish.eu.org/"><i class="fa-fw fas fa-images"></i><span> 图床</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">少言少语</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/JssDream" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:jshao817@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://t.me/jssmile" target="_blank" title="Telegram"><i class="fab fa-telegram" style="color: #24292e;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/articles/2021/12/03/1638516438999.html" title="基于 springBoot 实现webSocket方式的扫码登录"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/JssDream/image-hosting/img/174035-1523958035455e.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于 springBoot 实现webSocket方式的扫码登录"></a></div><div class="recent-post-info"><a class="article-title" href="/articles/2021/12/03/1638516438999.html" title="基于 springBoot 实现webSocket方式的扫码登录">基于 springBoot 实现webSocket方式的扫码登录</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-03T07:27:19.000Z" title="发表于 2021-12-03 15:27:19">2021-12-03</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-12-03T07:27:57.000Z" title="更新于 2021-12-03 15:27:57">2021-12-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/WebSocket/">WebSocket</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/SpringBoot/">SpringBoot</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/WebSocket/">WebSocket</a></span></div><div class="content">一、首先咱们需要一张表这表是干啥的呢？就是记录一下谁扫码了。谁登录了。

User_Token表

字段如下：

uuid : 用于确保唯一性
userId ：谁登录的
loginTime ：登录时间
createTime ：创建时间 用于判断是否过期
state：是否二维码失效 0有效 1失效

二、角色都有哪些咱们还需要分析一下子。扫码登录这个业务逻辑都有哪些角色

android端 or 微信Web端 ：扫码
PC端 ：被扫。登录
服务端：掌控全局，提供接口。

三、接口都需要哪些？有了角色。你用大腿也能想出来接口了对不对！！
所以咱们的接口有2个！

生成二维码接口：生成一个二维码。二维码中有UUID。
确认身份接口：确定身份以及判断是否二维码过期等

四、步骤那句话怎么说的来着。要把大象装冰箱一共分几步？

PC端打开。调用生成二维码接口 并与 服务端建立链接。链接使用uuid进行绑定
微信Web端进行扫码。获取二维码中的uuid。
微信Web端拿到uuid以后。显示是否登录页面。点击确定后 调用 确认身份接口。
确认身份接口通过以后。服务端给PC端发送信息。完成登录。此时链 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/articles/2021/11/05/1636096023056.html" title="Java8 中 List 转 Map(Collectors.toMap) "><img class="post-bg" src="https://b3logfile.com/file/2021/11/2020-02-08-18-47-07-17292266.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java8 中 List 转 Map(Collectors.toMap) "></a></div><div class="recent-post-info"><a class="article-title" href="/articles/2021/11/05/1636096023056.html" title="Java8 中 List 转 Map(Collectors.toMap) ">Java8 中 List 转 Map(Collectors.toMap) </a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-11-05T07:07:03.000Z" title="发表于 2021-11-05 15:07:03">2021-11-05</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-11-05T07:26:05.000Z" title="更新于 2021-11-05 15:26:05">2021-11-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a></span></div><div class="content">使用 Java8 特性1userList.stream().collect(Collectors.toMap(User::getId, User::getName));

当然，如果希望得到 Map 的 value 为对象本身时，可以这样写：
1userList.stream().collect(Collectors.toMap(User::getId, t -&gt; t));

关于 Collectors.toMap 方法Collectors.toMap 有三个重载方法：



1234567toMap(Function&lt;? super T, ? extends K&gt; keyMapper, Function&lt;? super T, ? extends U&gt; valueMapper);toMap(Function&lt;? super T, ? extends K&gt; keyMapper, Function&lt;? super T, ? extends U&gt; valueMapper,        BinaryOperator&lt;U&gt; me ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/articles/2021/08/20/1629456511927.html" title="线程池之ThreadPoolExecutor"><img class="post-bg" src="https://b3logfile.com/file/2021/09/36-601c2839.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="线程池之ThreadPoolExecutor"></a></div><div class="recent-post-info"><a class="article-title" href="/articles/2021/08/20/1629456511927.html" title="线程池之ThreadPoolExecutor">线程池之ThreadPoolExecutor</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-20T10:48:32.000Z" title="发表于 2021-08-20 18:48:32">2021-08-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-09-10T08:28:35.000Z" title="更新于 2021-09-10 16:28:35">2021-09-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%BA%BF%E7%A8%8B%E6%B1%A0/">线程池</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/JUC/">JUC</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/">线程池</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a></span></div><div class="content">ThreadPoolExecutor提供了四个构造方法:
12345678public ThreadPoolExecutor(int corePoolSize,                              int maximumPoolSize,                              long keepAliveTime,                              TimeUnit unit,                              BlockingQueue&lt;Runnable&gt; workQueue) &#123;        this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,             Executors.defaultThreadFactory(), defaultHandler);    &#125;

123456789public ThreadPoolExecutor(int corePoolSiz ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/articles/2021/08/20/1629450256915.html" title="高并发之查询并更新原子问题"><img class="post-bg" src="https://b3logfile.com/file/2021/08/2019-09-16-10-50-12-774dee7f.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="高并发之查询并更新原子问题"></a></div><div class="recent-post-info"><a class="article-title" href="/articles/2021/08/20/1629450256915.html" title="高并发之查询并更新原子问题">高并发之查询并更新原子问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-20T09:04:17.000Z" title="发表于 2021-08-20 17:04:17">2021-08-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-08-20T09:05:43.000Z" title="更新于 2021-08-20 17:05:43">2021-08-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%AB%98%E5%B9%B6%E5%8F%91/">高并发</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%B9%B6%E5%8F%91/">并发</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%8E%9F%E5%AD%90/">原子</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Redis/">Redis</a></span></div><div class="content">场景：在日常开发中经常遇到先根据条件判断某条数据是否存在，如果不存在的话就插入，如果存在的话就更新或提示异常。一般代码的模式都写成下面这个样子，是一种很常见的写法，但是在并发情况下很容易会重复插入两条数据，大概的情况就是第一个请求进来，没有查询到该用户通过了if判断，但是if中有比较耗时的逻辑，在第一个请求还没执行insert的时候第二个请求也进来了，因为这个时候第一个请求还没执行insert操作，所以第二个请求也没有查询到该用户也通过了if判断，这个样子就造成了两条重复的数据。
12345678910// 查询名字叫user1的用户是否存在UserVo userVo= userMapper.selectUserByName(&quot;user1&quot;);    // 如果不存在就插入数据    if (userVo==null) &#123;        Thread.sleep(10000);        UserVo userVo = new UserVo();        userVo.setUserName(&quot;user1&quot;);         ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/articles/2021/07/09/1625814815830.html" title="架构—秒杀系统优化思路"><img class="post-bg" src="https://b3logfile.com/file/2021/07/14-3cd630f3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="架构—秒杀系统优化思路"></a></div><div class="recent-post-info"><a class="article-title" href="/articles/2021/07/09/1625814815830.html" title="架构—秒杀系统优化思路">架构—秒杀系统优化思路</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-07-09T07:13:36.000Z" title="发表于 2021-07-09 15:13:36">2021-07-09</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-07-09T07:13:36.000Z" title="更新于 2021-07-09 15:13:36">2021-07-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">架构设计</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84%E6%B6%89%E5%8F%8A/">架构涉及</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E7%A7%92%E6%9D%80/">秒杀</a></span></div><div class="content">秒杀系统优化思路
转载：架构之师

一、秒杀业务为什么难做
im系统，例如qq或者微博，每个人都读自己的数据（好友列表、群列表、个人信息）；
微博系统，每个人读你关注的人的数据，一个人读多个人的数据；
秒杀系统，库存只有一份，所有人会在集中的时间读和写这些数据，多个人读一个数据。

例如：小米手机每周二的秒杀，可能手机只有1万部，但瞬时进入的流量可能是几百几千万。又例如：12306抢票，票是有限的，库存一份，瞬时流量非常多，都读相同的库存。读写冲突，锁非常严重，这是秒杀业务难的地方。那我们怎么优化秒杀业务的架构呢？
二、优化方向优化方向有两个（今天就讲这两个点）：（1）将请求尽量拦截在系统上游（不要让锁冲突落到数据库上去）。传统秒杀系统之所以挂，请求都压倒了后端数据层，数据读写锁冲突严重，并发高响应慢，几乎所有请求都超时，流量虽大，下单成功的有效流量甚小。以12306为例，一趟火车其实只有2000张票，200w个人来买，基本没有人能买成功，请求有效率为0。
（2）充分利用缓存，秒杀买票，这是一个典型的读多写少的应用场景，大部分请求是车次查询，票查询，下单和支付才是写请求。一趟火车其实只 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/articles/2020/12/07/1607345203030.html" title="Java中针对List集合(交集/并集/差集)和数组的Lambda操作"><img class="post-bg" src="https://b3logfile.com/file/2020/12/20200704231606-66c05df6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java中针对List集合(交集/并集/差集)和数组的Lambda操作"></a></div><div class="recent-post-info"><a class="article-title" href="/articles/2020/12/07/1607345203030.html" title="Java中针对List集合(交集/并集/差集)和数组的Lambda操作">Java中针对List集合(交集/并集/差集)和数组的Lambda操作</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-07T12:46:43.000Z" title="发表于 2020-12-07 20:46:43">2020-12-07</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-07T12:46:43.000Z" title="更新于 2020-12-07 20:46:43">2020-12-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Lambda/">Lambda</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E6%95%B0%E7%BB%84/">数组</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E9%9B%86%E5%90%88/">集合</a></span></div><div class="content">Lambda实现Java List的交集&#x2F;并集&#x2F;差集&#x2F;去重复并集
经常记不住，只能写下来了！！！


1.8之前交、并集采用简单的 removeAll retainAll 等操作

12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import static java.util.stream.Collectors.toList;import java.util.ArrayList;import java.util.List;public class Test &#123;    public static void main(String[] args) &#123;        List&lt;String&gt; list1 = new ArrayList();        list1.add(&quot;1111&quot;);        list1.add(&quot;2222&quot;);      ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/articles/2020/08/20/1597909638127.html" title="Spring Cloud版本号"><img class="post-bg" src="https://b3logfile.com/file/2020/08/20190909175734-d4caf10a.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Cloud版本号"></a></div><div class="recent-post-info"><a class="article-title" href="/articles/2020/08/20/1597909638127.html" title="Spring Cloud版本号">Spring Cloud版本号</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-08-20T07:47:18.000Z" title="发表于 2020-08-20 15:47:18">2020-08-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-08-20T07:48:10.000Z" title="更新于 2020-08-20 15:48:10">2020-08-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SpringCloud/">SpringCloud</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E9%9A%8F%E8%AE%B0/">随记</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/SpringCloud/">SpringCloud</a></span></div><div class="content">序Spring Cloud使用的版本号是英文方式，而不是传统的数字版本，为什么呢。因为Spring Cloud是微服务的解决方案，他会有很多子项目，每个子项目都维护这自己的版本号，为了避免冲突，就使用了伦敦地铁站的名字作为版本号。以首字母作为顺序，a,b,c,d….排列。
说明现有版本号：Angel、Brixton、Camden、Daston、Edgware、Finchley、GreenWich、Hoxton。
扩展常见版本号说明
例如 2.1.13.RELEASE

其中Release的意思是最终版本，除此之外：

Base：设计阶段。只有相应的设计没有具体的功能实现。

Alpha：软件的初级版本。基本功能已经实现，但存在较多的bug。

Bate：相对于Alpha已经有了很大的进步，消除了严重的BUG，但还存在一些潜在的BUG，还需要不断测试。

RELEASE：最终版本，没有太大的问题。


Spring Cloud 版本后缀
BUILD-XXX　　　　　开发版　　　　开发团队内部使用，不是很稳定
GA　　　　　　　　　稳定版　　　　相比于开发版，基本上可以使用了
PRE（M1 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/articles/2020/07/24/1595578346772.html" title="MinIO-炒鸡好用的网盘+文件服务器"><img class="post-bg" src="https://b3logfile.com/file/2020/07/00184915912011292fcb-f8bef089.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MinIO-炒鸡好用的网盘+文件服务器"></a></div><div class="recent-post-info"><a class="article-title" href="/articles/2020/07/24/1595578346772.html" title="MinIO-炒鸡好用的网盘+文件服务器">MinIO-炒鸡好用的网盘+文件服务器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-07-24T08:12:27.000Z" title="发表于 2020-07-24 16:12:27">2020-07-24</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-07-24T08:12:27.000Z" title="更新于 2020-07-24 16:12:27">2020-07-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MinIO/">MinIO</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MinIO/">MinIO</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/">文件服务器</a></span></div><div class="content">简介
MinIO 是一个基于Apache License v2.0开源协议的对象存储服务。它兼容亚马逊S3云存储服务接口，非常适合于存储大容量非结构化的数据，例如图片、视频、日志文件、备份数据和容器&#x2F;虚拟机镜像等，而一个对象文件可以是任意大小，从几kb到最大5T不等。MinIO是一个非常轻量的服务,可以很简单的和其他应用的结合，类似 NodeJS, Redis 或者 MySQL

优点
支持分布式存储，具备高扩展性、高可用性
部署简单但功能丰富 通过 docker 方式部署
官方的文档也很详细 MinIO
部署方式多样性(单机部署，分布式部署)

部署推荐使用 docker 一键安装：
1234567docker run -it -p 9000:9000 --name minio \-d --restart=always \-e &quot;MINIO_ACCESS_KEY=admin&quot; \-e &quot;MINIO_SECRET_KEY=12345678&quot; \-v /data/minio/data:/data \-v /data/minio/confi ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/articles/2020/06/17/1592396658708.html" title="EasyPoi导出字段为超链接"><img class="post-bg" src="https://b3logfile.com/file/2020/06/wallhavenymwj9d-0a240441.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="EasyPoi导出字段为超链接"></a></div><div class="recent-post-info"><a class="article-title" href="/articles/2020/06/17/1592396658708.html" title="EasyPoi导出字段为超链接">EasyPoi导出字段为超链接</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-06-17T12:24:18.000Z" title="发表于 2020-06-17 20:24:18">2020-06-17</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-06-17T12:24:18.000Z" title="更新于 2020-06-17 20:24:18">2020-06-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/EasyPOI/">EasyPOI</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E9%9A%8F%E8%AE%B0/">随记</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/EasyPOI/">EasyPOI</a></span></div><div class="content">看文档 http://easypoi.mydoc.io/步骤一
字段上面开启超链接12@Excel(name = &quot;地址&quot;, isHyperlink = true)private String path;

步骤二
实现拦截类



代码实现

123456789public class ExcelDataHandler extends ExcelDataHandlerDefaultImpl&lt;Object&gt; &#123;    @Override    public Hyperlink getHyperlink(CreationHelper creationHelper, Object obj, String name, Object value) &#123;        Hyperlink hyperlink = creationHelper.createHyperlink(HyperlinkType.URL);        hyperlink.setLabel(name);        hyperlink.setAddress((String ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/articles/2020/06/10/1591791265043.html" title="记录IDEA的关于数据库连接问题"><img class="post-bg" src="https://b3logfile.com/file/2020/06/wallhaven6k3oox-383d735c.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="记录IDEA的关于数据库连接问题"></a></div><div class="recent-post-info"><a class="article-title" href="/articles/2020/06/10/1591791265043.html" title="记录IDEA的关于数据库连接问题">记录IDEA的关于数据库连接问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-06-10T12:14:25.000Z" title="发表于 2020-06-10 20:14:25">2020-06-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-06-10T12:14:25.000Z" title="更新于 2020-06-10 20:14:25">2020-06-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/IDEA/">IDEA</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E9%9A%8F%E8%AE%B0/">随记</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/IDEA/">IDEA</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5/">数据库连接</a></span></div><div class="content">序今天更新了IDEA，更新到2020.1.1，发现了两个关于数据库问题。

1. IDEA 数据库连接，密码不保存，重复输入问题
明明是永远save，就是不起作用，每次重启IDEA都要输入。

解答：在IDEA File—&gt;Setting—&gt;搜索In KeePass，然后勾选即可。

2. IDEA 数据库连接上，mapper.xml文件中sql的表名和字段，不能点击问题解答：
首先连接数据源
File-&gt;Settings-&gt;Languages&amp;Frameworks-&gt;SQL Resolution Scopes 勾选所有数据源 
File-&gt;Settings-&gt;Languages&amp;Frameworks-&gt;SQL Dialects -&gt; 全局和项目选择MySQL  

OK，解决！</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/#content-inner">6</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://avatars.githubusercontent.com/u/24471999" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">JssDream</div><div class="author-info__description">少言少语</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">52</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">74</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">32</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/JssDream"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/JssDream" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:jshao817@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://t.me/jssmile" target="_blank" title="Telegram"><i class="fab fa-telegram" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到少言少语 ^-^</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/articles/2024/04/29/20240429155719.html" title="访微信朋友圈的博客，记录简单生活"><img src="https://img.tfish.eu.org/file/2a72b59fc721c5edfbeac.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="访微信朋友圈的博客，记录简单生活"/></a><div class="content"><a class="title" href="/articles/2024/04/29/20240429155719.html" title="访微信朋友圈的博客，记录简单生活">访微信朋友圈的博客，记录简单生活</a><time datetime="2024-04-29T07:57:19.000Z" title="发表于 2024-04-29 15:57:19">2024-04-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/2023/12/19/1702967438000.html" title="资源搜索引擎"><img src="https://p0.meituan.net/csc/a926bcb1c3624fd002155fa2fff64f89280575.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="资源搜索引擎"/></a><div class="content"><a class="title" href="/articles/2023/12/19/1702967438000.html" title="资源搜索引擎">资源搜索引擎</a><time datetime="2023-12-19T06:30:38.000Z" title="发表于 2023-12-19 14:30:38">2023-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/2023/12/19/1702966238000.html" title="关于 Telegram 电报"><img src="https://p0.meituan.net/csc/0de5040deb0d4a089aadd5d2573371ba69565.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="关于 Telegram 电报"/></a><div class="content"><a class="title" href="/articles/2023/12/19/1702966238000.html" title="关于 Telegram 电报">关于 Telegram 电报</a><time datetime="2023-12-19T06:10:38.000Z" title="发表于 2023-12-19 14:10:38">2023-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/2022/06/22/1655886812960.html" title="Guava RateLimiter"><img src="https://b3logfile.com/bing/20210707.jpg?imageView2/1/w/960/h/540/interlace/1/q/100" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Guava RateLimiter"/></a><div class="content"><a class="title" href="/articles/2022/06/22/1655886812960.html" title="Guava RateLimiter">Guava RateLimiter</a><time datetime="2022-06-22T08:33:33.000Z" title="发表于 2022-06-22 16:33:33">2022-06-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/2022/06/21/1655822818000.html" title="注解实现接口数据的脱敏"><img src="https://b3logfile.com/bing/20201017.jpg?imageView2/1/w/960/h/540/interlace/1/q/100" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="注解实现接口数据的脱敏"/></a><div class="content"><a class="title" href="/articles/2022/06/21/1655822818000.html" title="注解实现接口数据的脱敏">注解实现接口数据的脱敏</a><time datetime="2022-06-21T14:46:58.000Z" title="发表于 2022-06-21 22:46:58">2022-06-21</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/API/"><span class="card-category-list-name">API</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/EasyPOI/"><span class="card-category-list-name">EasyPOI</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Git/"><span class="card-category-list-name">Git</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/GitHub/"><span class="card-category-list-name">GitHub</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/IDEA/"><span class="card-category-list-name">IDEA</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Jenkins/"><span class="card-category-list-name">Jenkins</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Python/" style="font-size: 1.15em; color: rgb(52, 168, 135)">Python</a><a href="/tags/%E9%9A%8F%E8%AE%B0/" style="font-size: 1.45em; color: rgb(198, 61, 12)">随记</a><a href="/tags/Linux/" style="font-size: 1.32em; color: rgb(87, 69, 5)">Linux</a><a href="/tags/Docker/" style="font-size: 1.19em; color: rgb(39, 79, 129)">Docker</a><a href="/tags/%E7%A6%8F%E5%88%A9/" style="font-size: 1.32em; color: rgb(87, 2, 179)">福利</a><a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 1.41em; color: rgb(92, 95, 39)">分享</a><a href="/tags/%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6/" style="font-size: 1.15em; color: rgb(18, 129, 64)">开源软件</a><a href="/tags/Tools/" style="font-size: 1.19em; color: rgb(172, 14, 14)">Tools</a><a href="/tags/%E5%BD%B1%E8%A7%86%E8%B5%84%E6%BA%90/" style="font-size: 1.28em; color: rgb(144, 128, 61)">影视资源</a><a href="/tags/Nginx/" style="font-size: 1.15em; color: rgb(103, 118, 56)">Nginx</a><a href="/tags/%E9%AD%94%E9%AC%BC%E5%91%BD%E4%BB%A4/" style="font-size: 1.28em; color: rgb(94, 138, 161)">魔鬼命令</a><a href="/tags/MySQL/" style="font-size: 1.24em; color: rgb(54, 71, 52)">MySQL</a><a href="/tags/Jackson/" style="font-size: 1.15em; color: rgb(190, 25, 180)">Jackson</a><a href="/tags/SpringBoot/" style="font-size: 1.36em; color: rgb(200, 6, 83)">SpringBoot</a><a href="/tags/%E6%97%A5%E6%9C%9F%E8%BE%93%E5%87%BA/" style="font-size: 1.15em; color: rgb(111, 35, 135)">日期输出</a><a href="/tags/%E4%BA%8B%E5%8A%A1Transaction/" style="font-size: 1.15em; color: rgb(100, 51, 176)">事务Transaction</a><a href="/tags/%E8%B6%A3%E5%91%B3%E7%BC%96%E7%A8%8B/" style="font-size: 1.15em; color: rgb(57, 176, 134)">趣味编程</a><a href="/tags/Banner/" style="font-size: 1.15em; color: rgb(184, 65, 107)">Banner</a><a href="/tags/Crontab/" style="font-size: 1.15em; color: rgb(161, 79, 78)">Crontab</a><a href="/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" style="font-size: 1.15em; color: rgb(77, 91, 9)">定时任务</a><a href="/tags/Solo/" style="font-size: 1.15em; color: rgb(87, 120, 128)">Solo</a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size: 1.15em; color: rgb(13, 164, 45)">网站</a><a href="/tags/%E9%A1%B5%E8%84%9A/" style="font-size: 1.15em; color: rgb(154, 17, 185)">页脚</a><a href="/tags/Spring/" style="font-size: 1.19em; color: rgb(97, 73, 11)">Spring</a><a href="/tags/%E5%88%87%E9%9D%A2/" style="font-size: 1.15em; color: rgb(126, 90, 79)">切面</a><a href="/tags/CORS%E8%B7%A8%E5%9F%9F/" style="font-size: 1.15em; color: rgb(49, 180, 105)">CORS跨域</a><a href="/tags/Java/" style="font-size: 1.36em; color: rgb(74, 153, 72)">Java</a><a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size: 1.15em; color: rgb(189, 167, 39)">正则</a><a href="/tags/%E6%B4%BB%E5%8A%A8/" style="font-size: 1.15em; color: rgb(55, 149, 110)">活动</a><a href="/tags/%E8%96%85%E7%BE%8A%E6%AF%9B/" style="font-size: 1.19em; color: rgb(132, 30, 116)">薅羊毛</a><a href="/tags/Jenkins/" style="font-size: 1.15em; color: rgb(39, 139, 32)">Jenkins</a><a href="/tags/%E6%8E%A8%E5%B9%BF/" style="font-size: 1.15em; color: rgb(137, 158, 42)">推广</a><a href="/tags/EasyPOI/" style="font-size: 1.19em; color: rgb(135, 53, 159)">EasyPOI</a><a href="/tags/IDEA/" style="font-size: 1.15em; color: rgb(87, 24, 183)">IDEA</a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5/" style="font-size: 1.15em; color: rgb(179, 15, 111)">数据库连接</a><a href="/tags/GitHub/" style="font-size: 1.19em; color: rgb(53, 91, 77)">GitHub</a><a href="/tags/jsDelivr/" style="font-size: 1.15em; color: rgb(34, 144, 41)">jsDelivr</a><a href="/tags/API/" style="font-size: 1.15em; color: rgb(129, 136, 157)">API</a><a href="/tags/%E4%BA%8C%E6%AC%A1%E5%85%83/" style="font-size: 1.15em; color: rgb(98, 165, 43)">二次元</a><a href="/tags/Git/" style="font-size: 1.15em; color: rgb(97, 41, 96)">Git</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">十一月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">52</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-01-07T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">38.2k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-04-29T08:40:55.443Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://img.tfish.eu.org/file/90a7b42b487084f6d8e56.png')"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By JssDream</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["静以修身&#44;俭以养德","今日事&#44;今日毕","分享是一种美德&#44;是一种态度"])
  } else {
    document.getElementById("subtitle").textContent = "静以修身&#44;俭以养德"
  }
}
typedJSFn.run(subtitleType)</script></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=monsterid'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://gt98dgh0.api.lncldglobal.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'Gt98dGh0IrJbu9uth238NAUf-MdYXbMMI',
        "X-LC-Key": 'NmLKD9qRUahMwVseOFbT1GrU',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>